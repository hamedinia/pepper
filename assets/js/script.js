//data
var Data={
    "app-name": " آموزش آشپزی فلفل ",
    "app-version": "1.0.0",
    "item": [
        {
            "ID": "1",
            "name": "استیک با قارچ شکم پر",
            "shortDescription": "استیک با مرینیت مکزیکی همراه قارچ‌های کوچولو که با سس خامه‌ای بلوچیز و پوره سیب زمینی سرو میشه، همون طعمیه که از یه رستوران فرانسوی انتظار دارین.",
            "ingredients": "<ul><li> 150 گرم راسته گوساله</li><li> 3 عدد قارچ</li><li> 0.5 عدد فلفل دلمه ای قرمز</li><li> 50 گرم لوبیا سبز</li><li> 25 گرم پنیر بلوچیز</li><li> 150 گرم سیب زمینی</li><li> 100 گرم خامه صبحانه</li><li> 25 گرم ذرت</li><li> 60 میلی لیتر مایه مرینیت مکزیکی</li><li> 30 میلی لیتر روغن</li><li> 1 به مقدار لازم نمک</li><li> 1 به مقدار لازم فلفل سیاه</li></ul>",
            "images": [
                "1-1.jpg",
                "1-2.jpg"
            ],
            "howTo": "<ol>  <li>گوشت را در مایه مرینیت قرار دهید. روی آن&zwnj;را با محافظ پلاستیکی بپوشانید و به مدت 1 الی 12 ساعت درون یخچال  قرار دهید تا مزه&zwnj;دار شود سپس تابه گریل را روی حرارت بالا قرار دهید و کمی روغن در تابه داغ کنید سپس دو طرف  گوشت را به میزان دلخواه پخت خودتان در تابه گریل کنید.  </li>  <li>در زمان استراحت استیک، مواد اولیه را بشویید. یک چهارم از فلفل دلمه&zwnj;ای و یک چهارم از لوبیا سبز را مربعی ریز  برش دهید. باقیمانده هر دو را رشته&zwnj;ای متوسط برش دهید. پوست سیب زمینی را جدا کنید و آن&zwnj;را ریز برش دهید.  داخل قارچ را خالی کنید. قابلمه&zwnj;ای حاوی آب را روی حرارت قرار دهید تا بجوش آید، سیب زمینی را در آن بپزید و  آبکش کنید. وقتی سرد شد سیب زمینی را له کنید و به میزان دلخواه نمک و فلفل مخلوط کنید تا پوره سیب زمینی بدست آید.  </li>  <li>در تابه&zwnj;ای روی حرارت ملایم خامه را گرم کنید اما مراقب باشید که نجوشد، پنیر بلوچیز را به خامه اضافه کنید و  همه مواد را با هم مخلوط کنید تا یکدست شود سپس به میزان دلخواه نمک و فلفل به سس بلوچیز اضافه کنید. مقداری از سس  بلوچیز را برای روی قارچ های شکم پر نگه دارید و باقیمانده را با پوره سیب زمینی مخلوط کنید تا پوره بلوچیز بدست  آید.  </li>  <li>تابه&zwnj;ای را روی حرارت بالا قرار دهید. مقداری روغن در تابه داغ کنید. فلفل دلمه&zwnj;ای و لوبیای ریز خرد شده و  ذرت را به مدت 5-10 دقیقه در تابه تفت دهید تا ترد شوند سپس به میزان دلخواه نمک و فلفل اضافه کنید و تابه را از روی  حرارت بردارید.  </li>  <li>فر را در دمای 200 درجه سانتیگراد قرار دهید. داخل قارچ ها را با مخلوط لوبیا و ذرت پر کنید و روی آن&zwnj;را از سس  بلوچیز بریزید و قارچ ها را در فر قرار دهید تا روی آن طلایی شود.  </li>  <li>تابه&zwnj;ای را روی حرارت بالا قرار دهید. مقداری روغن در تابه داغ کنید. فلفل دلمه و لوبیا رشته&zwnj;ای را به مدت  5-10 دقیقه در تابه تفت دهید تا ترد شود سپس به میزان دلخواه نمک و فلفل به آن اضافه کنید و از روی حرارت بردارید.  استیک را در کنار پوره بلوچیز و قارچ شکم پر و سبزی�  </li>  </ol>"
        },
        {
            "ID": "2",
            "name": " نان پنیری ",
            "shortDescription": "میشه گفت یه جورایی آشپزی کردن دیگه جز وظایف خیلی از ما خانوم ها به حساب میاد و ممکنه بعضی وقت ها خستمون کنه. اما همیشه میتونیم با تنوع دادن در غذاهایی که درست میکنیم این کارو برای خودمون لذت بخش کنیم. یکی از تنوع های اساسی تو آشپزی هم پخت نونه که واقعا خستگی رو از تن آدم در میکنه مخصوصا وقتی بوی نون تازه تو خونه میپیچه. ",
            "ingredients": "<ul><li> ۲ پیمانه آرد</li><li> ۱ عدد تخم مرغ</li><li> ۱/۴ پیمانه روغن</li><li> ۱/۲ قاشق چایخوری شکر</li><li> ۱/۲ قاشق چایخوری نمک</li><li> ۱/۲ پیمانه شیر</li><li> ۲ قاشق مربا خوری پودر خمیر مایه فوری (۸ گرم)</li><li> کره برای رومال سطح نان به مقدار لازم</li><li> پنیر خامه ای به مقدار لازم</li></ul>",
            "images": [
                "2-1.jpg",
                "2-2.jpg"
            ],
            "howTo": "<ol><li>اول از همه باید اجازه بدیم تا خمیر مایه به عمل بیاد پس شیر رو ولرم میکنیم (۴۰ درجه سانتیگراد) و داخل یه کاسه با شکر مخلوط میکنیم بعد پودر خمیر مایه فوری رو روی سطح شیر پاشده و مخلوط میکنیم و میذاریم برای ۱۰ دقیقه بمونه.</li><li>این مقدار شکر باعث شیرین شدن نون نمیشه ولی برای به عمل اومدن خمیر مایه لازمه.</li><li>تا خمیر مایه به عمل میاد تخم مرغ رو با یه همزن دستی کمی میزنیم تا زرده و سفیده با هم مخلوط بشن و بعد روغن رو هم اضافه میکنیم و همشون میزنیم.</li><li>بعد از ۱۰ دقیقه خمیر مایه به عمل اومده و خوب پف کرده.</li><li>حالا مخلوط خمیر مایه رو هم به تخم مرغ و روغن اضافه کرده و با هم مخلوط میکنیم.</li><li>نمک و آرد که ۲ الی ۳ بار الک شده رو به مخلوطمون اضافه میکنیم بهتره تا حدود ۱/۲ پیمانه از آرد رو نریزیم تا بعدا در صورت چسبناک بودن خمیر بهش اضافه کنیم.</li><li>حالا مواد رو با یه قاشق هم میزنیم تا خودشون رو بگیرن.</li><li>بعد شروع به ورز داد خمیر با دست میکنیم تا خمیر شکل بگیره و نرم و لطیف و منسجم بشه در این مرحله اگه احساس کردین خمیر خیلی چسبناکه و منسجم نمیشه آرد اضافی رو کم کم داخلش بریزین و باز ورزش بدین.</li><li>دقت کنین که خمیر همیشه به دستی که خمیری باشه میچسبه و در صورتی که به دست تمیز نچسبید اونوقت آماده است. حدود ۱۰ دقیقه به ورز دادن خمیر ادامه میدیم تا یه خمیر نرم و لطیف داشته باشیم.</li><li>حالا داخل یه کاسه رو&nbsp; با کم روغن چرب میکنیم و خمیر ورز داده رو داخلش میذاریم و روی سطح ظرف رو با یه دستمال میپوشونیم و ظرف رو برای مدت ۱ الی ۲ ساعت در جای نسبتا گرم میذاریم تا حجمش دو برابر بشه.</li><li>حالا باز کمی خمیر رو ورز میدیم تا پفش بخوابه و بعد به ۶ چونه مساوی تقسیمش میکنیم.</li><li>حالا هر کدوم از چونه ها رو با وردنه کمی پهن میکنیم باید دقت کنیم که وسط خمیر ضخیم تر از اطرافش باشه چون اطراف خمیر بعد از گذاشتن پنیر روی هم جمع میشن و در صورت ضخیم بودن نونمون خوب بسته نشده و بعد پخت خوش فرم نمیشه.</li><li>حالا وسط خمیرمون تقریبا یک قاشق مربا خوری پنیر خامه ای میذاریم.</li><li>&nbsp;دو طرف خمیر رو به هم میرسونیم و میچسبونیم.</li><li>حالا دوطرف دیگه رو هم به هم میرسونیم باز میچسبونیمش.</li><li>همه چونه ها که به ترتیب بالا آماده شدن، روشون رو با یه پارچه میپوشونیم و میذاریم تا نیم ساعت دیگه بمونن و یکم پف کنن و بعد این مدت زمان سطحشون رو با یه فرچه به کره آب شده آغشته میکنیم.</li><li>حالا خمیر هارو برای مدت ۱۵ الی ۲۰ دقیقه داخل فری که از قبل با دمای ۱۸۰ درجه گرم شده میذاریم تا بپزن در نهایت میتونیم گریل رو برای مدت ۵ دقیقه روشن کنیم تا سطح نون ها برشته بشه … حالا از فر درشون میاریم و نون های ما آماده هستن …. نوش جان</li></ol>"
        },
        {
            "ID": "3",
            "name": "استیک با قارچ شکم پر",
            "shortDescription": "",
            "ingredients": "",
            "images": [
                "1-1.jpg",
                "1-2.jpg"
            ],
            "howTo": ""
        },
        {
            "ID": "4",
            "name": "استیک با قارچ شکم پر",
            "shortDescription": "",
            "ingredients": "",
            "images": [
                "1-1.jpg",
                "1-2.jpg"
            ],
            "howTo": ""
        },
        {
            "ID": "5",
            "name": "استیک با قارچ شکم پر",
            "shortDescription": "",
            "ingredients": "",
            "images": [
                "1-1.jpg",
                "1-2.jpg"
            ],
            "howTo": ""
        },
        {
            "ID": "6",
            "name": "استیک با قارچ شکم پر",
            "shortDescription": "",
            "ingredients": "",
            "images": [
                "1-1.jpg",
                "1-2.jpg"
            ],
            "howTo": ""
        },
        {
            "ID": "7",
            "name": "استیک با قارچ شکم پر",
            "shortDescription": "",
            "ingredients": "",
            "images": [
                "1-1.jpg",
                "1-2.jpg"
            ],
            "howTo": ""
        }
    ]
};


function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(";");
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == " ") {
            c = c.substring(1)
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length)
        }
    }
    return ""
}

function setCookie(cname, cvalue, days) {
    var d = new Date;
    d.setTime(d.getTime() + days * 24 * 60 * 60 * 1e3);
    var expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/"
}

function isPhoneNumber(inputTXT) {
    var phoneNo = /^(09)\d{9}$/;
    if (inputTXT.match(phoneNo)) {
        return true
    } else {
        return false
    }
}

/*
var correctSound = new Audio("assets/sound/correct1.mp3");
var wrongSound = new Audio("assets/sound/wrong1.mp3");*/

var storage = window.localStorage;
var userDATA = '';
if (typeof Storage !== "undefined") {
    userDATA = storage.getItem("userDATA")
}
var app = angular.module("appApplication", []).controller("appCTRL", ["$scope", "$sce", function ($scope, $sce) {
    $scope.afterReload = function () {
        if (!$scope.$$phase) {
            $scope.$apply()
        }
        /*
                $('[data-toggle="tooltip"]').tooltip();
                $('[data-toggle="popover"].popover()*/
    };
    /*     $scope.playSound = function (state) {
          if (state === true) correctSound.play();
          else wrongSound.play()
      };*/
    /*$scope.functionData = jQuery.parseJSON(message);*/

    $scope.foodDATA = null;
    $scope.favoriteList = [];
    if (typeof Storage !== "undefined") {
        $scope.favoriteList = storage.getItem("favoriteList");
        if (!$scope.favoriteList)
            $scope.favoriteList = [];
        else
            $scope.favoriteList = $scope.favoriteList.split(',');
    }
//get data
    $scope.foodDATA = Data;

    $scope.currentContent = $scope.foodDATA.item[0];
    /*$scope.afterReload();*/
    $scope.foodDATA.item.forEach(function (item, index) {
        $scope.foodDATA.item[index].ingredients = $sce.trustAsHtml(item.ingredients);
        $scope.foodDATA.item[index].howTo = $sce.trustAsHtml(item.howTo);
        $scope.foodDATA.item[index].favorite = ($scope.favoriteList.indexOf(item.ID) > -1);
    });
    console.log($scope.foodDATA);
    $scope.afterReload();
    $scope.showContent = function (key) {
        $scope.currentContent = $scope.foodDATA.item[key];
        $.mobile.changePage($("#showContent"), "none");
    };

    $scope.changeFavorite = function () {
        if ($scope.favoriteList.indexOf($scope.currentContent.ID) !== -1)
            $scope.favoriteList.splice($scope.favoriteList.indexOf($scope.currentContent.ID), 1);
        else
            $scope.favoriteList.push($scope.currentContent.ID);
        storage.setItem('favoriteList', $scope.favoriteList);
        console.log($scope.favoriteList);
        $scope.foodDATA.item.forEach(function (item, index) {
            if (item === $scope.currentContent)
                $scope.foodDATA.item[index].favorite = !$scope.foodDATA.item[index].favorite;
        });
    }
}]);